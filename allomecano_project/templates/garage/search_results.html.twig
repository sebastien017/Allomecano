{% extends 'base.html.twig' %}

{% block title %}Allomecano | RÃ©sultat de la recherche{% endblock %}

{% block body %}

<section class="section flex-1">
<div class="column is-6 is-vcentered">
<div id="map">
</div>
</div>
</section>

<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
<script src="https://maps.google.com/maps/api/js?key=AIzaSyAa_XzBtUTRBtVf2yBNiqYhT1bvBJX_Xoo" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gmap3/7.2.0/gmap3.min.js" type="text/javascript"></script>


<script>
	/*	map = new google.maps.Map(document.getElementById("map"), {
		center: new google.maps.LatLng({{ zoomLatitude }}, {{ zoomLongitude }}),
		zoom: 11,
		mapTypeId: google.maps.MapTypeId.ROADMAP,
		mapTypeControl: true,
		scrollwheel: true,
		mapTypeControlOptions: {
			style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
		},
			navigationControl: true,
			navigationControlOptions: {
			style: google.maps.NavigationControlStyle.ZOOM_PAN
		}
		});

		geocoder = new google.maps.Geocoder();
		// On parcourt l'objet garages
		{% for garage in garages %}
		{
			geocoder.geocode({ 'address': "{{ garage.adress }}" }, function (results, status) 
			{
        		var latLng = {lat: results[0].geometry.location.lat (), lng: results[0].geometry.location.lng ()};

        		if (status == 'OK') 
				{
            		var marker = new google.maps.Marker({
                	position: latLng,
                	map: map
            		});
        		} 
				else 
				{
            		console.log('Geocode was not successful for the following reason: ' + status);
        		}
    		});
		}
		{% endfor %}*/

  $("#map").gmap3({
        center:[{{ zoomLatitude }}, {{ zoomLongitude }}],
        zoom: 14,
        mapTypeId : google.maps.MapTypeId.ROADMAP
      })
      .marker([
        {% for garage in garages %}
        	{address:"{{ garage.adress }}", options:{icon: "https://maps.google.com/mapfiles/marker_grey.png"}},
	  	{% endfor %}
      ]);
	
	/*.gmap3({
  map:{
    options:{
      center:[{{ zoomLatitude }},{{ zoomLongitude }}],
      zoom: 1,
	  mapTypeId: google.maps.MapTypeId.TERRAIN
    }
  },
	markers:{
    values:[
      {% for garage in garages %}
        	{address:"{{ garage.adress }}", options:{icon: "https://maps.google.com/mapfiles/marker_grey.png"}},
	  	{% endfor %}
    ],
  }
});
   /*overlay:{
        values: [
            { latLng: [38.55240, -90.41710], data: "PRINTER01", options: { content: "<div>Whatever you want here!</div>" }  },
            { address: "1234 E. Main Street, Springfield USA", data: "SERVER01", options: { content: "<div><i class='icon-reorder'></i></div>" } }
        ],*/   
</script>

{% endblock %}

