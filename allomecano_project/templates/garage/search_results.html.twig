{% extends 'base.html.twig' %}

{% block title %}Allomecano | Résultat de la recherche{% endblock %}

{% block body %}

<section class="section flex-1">
<div class="column is-6 is-vcentered">
<div id="map">
</div>
</div>
</section>

<script src="https://maps.google.com/maps/api/js?key=AIzaSyAa_XzBtUTRBtVf2yBNiqYhT1bvBJX_Xoo" type="text/javascript"></script>

<script>
map = new google.maps.Map(document.getElementById("map"), {
		center: new google.maps.LatLng({{ zoomLatitude }}, {{ zoomLongitude }}),
		zoom: 11,
		mapTypeId: google.maps.MapTypeId.ROADMAP,
		mapTypeControl: true,
		scrollwheel: true,
		mapTypeControlOptions: {
			style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR
		},
			navigationControl: true,
			navigationControlOptions: {
			style: google.maps.NavigationControlStyle.ZOOM_PAN
		}
	});
		// On construit l'objet villes à partir de la variable json 
		let villes = JSON.parse(garages);
		// On parcourt l'objet villes
		for(garage in garages){
			var marker = new google.maps.Marker({
				// parseFloat nous permet de transformer la latitude et la longitude en nombre décimal
				position: {lat: parseFloat(villes[ville].lat), lng: parseFloat(villes[ville].lon)},
				title: villes[ville].nomVille,
				map: map
			});	
		}
</script>

{% endblock %}
